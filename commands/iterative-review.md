---
allowed-tools: Bash, Read, Write, Edit, Grep, Glob, TodoWrite, AskUserQuestion, Task
argument-hint: <å¯¾è±¡> [--rounds=3] [--perspectives=security,performance,maintainability]
description: è¤‡æ•°è¦–ç‚¹ã«ã‚ˆã‚‹åå¾©ãƒ¬ãƒ“ãƒ¥ãƒ¼ - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ä¿å®ˆæ€§ã‚’å¤šè§’çš„ã«åˆ†æ
model: sonnet
---

# ğŸ”„ åå¾©ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 

ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡: $ARGUMENTS

## æ¦‚è¦

è¤‡æ•°ã®ç•°ãªã‚‹è¦–ç‚¹ã‹ã‚‰åŒã˜ã‚³ãƒ¼ãƒ‰ãƒ»è¨­å®šãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’åå¾©çš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã“ã¨ã§ã€å˜ä¸€è¦–ç‚¹ã§ã¯è¦‹è½ã¨ã—ãŒã¡ãªå•é¡Œã‚’åŒ…æ‹¬çš„ã«ç™ºè¦‹ã—ã¾ã™ã€‚

**åˆ©ç‚¹**:
- å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ç•°ãªã‚‹ç€çœ¼ç‚¹ãŒå¾—ã‚‰ã‚Œã‚‹
- å˜ä¸€è¦–ç‚¹ã®ç›²ç‚¹ã‚’è£œå®Œ
- ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªå“è³ªå‘ä¸Š

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# åŸºæœ¬çš„ãªä½¿ç”¨ï¼ˆ3è¦–ç‚¹ï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ä¿å®ˆæ€§ï¼‰
/iterative-review src/components/Button.tsx

# CLAUDE.md ã®åŒ…æ‹¬ãƒ¬ãƒ“ãƒ¥ãƒ¼
/iterative-review ~/.claude/CLAUDE.md

# ã‚«ã‚¹ã‚¿ãƒ è¦–ç‚¹æŒ‡å®š
/iterative-review file.ts --perspectives=security,accessibility,performance

# ãƒ©ã‚¦ãƒ³ãƒ‰æ•°å¤‰æ›´
/iterative-review file.ts --rounds=5

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…¨ä½“ãƒ¬ãƒ“ãƒ¥ãƒ¼
/iterative-review src/components/

# MR/PRãƒ¬ãƒ“ãƒ¥ãƒ¼
/iterative-review --mr 123
/iterative-review --pr 456
```

## Current State

ä»¥ä¸‹ã®æƒ…å ±ã‚’åé›†ã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¾ã™:

**æ³¨**: ã“ã®æƒ…å ±åé›†ã¯ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‹å§‹æ™‚ã«1å›ã®ã¿å®Ÿè¡Œã—ã€ä»¥é™ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã§å†åˆ©ç”¨ã—ã¾ã™ã€‚

ã‚ãªãŸã¯çµŒé¨“è±Šå¯Œãªã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã€è¤‡æ•°ã®å°‚é–€çš„è¦–ç‚¹ã‹ã‚‰å¯¾è±¡ã‚’åå¾©çš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¾ã™ã€‚

## åŸºæœ¬æ–¹é‡

- **å¤šè§’çš„åˆ†æ**: ç•°ãªã‚‹å°‚é–€è¦–ç‚¹ã‹ã‚‰ã®åŒ…æ‹¬çš„è©•ä¾¡
- **å»ºè¨­çš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: å…·ä½“çš„ãªæ”¹å–„æ¡ˆã®æç¤º
- **å„ªå…ˆé †ä½ä»˜ã‘**: ç™ºè¦‹äº‹é …ã®é‡è¦åº¦åˆ†é¡
- **çµ±åˆãƒ¬ãƒãƒ¼ãƒˆ**: å…¨è¦–ç‚¹ã®çµæœã‚’çµ±åˆã—ãŸæœ€çµ‚å ±å‘Š

## Execution Flow

### 1. å¼•æ•°è§£æã¨ãƒ¬ãƒ“ãƒ¥ãƒ¼è¨ˆç”»

**TodoWriteå¿…é ˆä½¿ç”¨**:
1. å¯¾è±¡ã®ç‰¹å®šï¼ˆãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª/MR/PRï¼‰
2. è¦–ç‚¹ã®æ±ºå®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ or ã‚«ã‚¹ã‚¿ãƒ ï¼‰
3. ãƒ©ã‚¦ãƒ³ãƒ‰æ•°ã®ç¢ºèª
4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ¶é™ã®ç¢ºèªï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ•°ãƒ»ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯ï¼‰
5. å„ãƒ©ã‚¦ãƒ³ãƒ‰ã®å®Ÿè¡Œè¨ˆç”»ç­–å®š

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ¶é™

ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œå‰ã«ä»¥ä¸‹ã®åˆ¶é™ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦è­¦å‘Šã¾ãŸã¯ã‚¹ã‚­ãƒƒãƒ—ã‚’å®Ÿè¡Œ:

- **æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«æ•°**: 500ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè¶…éæ™‚ã¯è­¦å‘Šè¡¨ç¤ºï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™**: 1ãƒ•ã‚¡ã‚¤ãƒ«ã‚ãŸã‚Š10,000è¡Œã¾ã§
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: å„ãƒ©ã‚¦ãƒ³ãƒ‰æœ€å¤§10åˆ†
- **é™¤å¤–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `node_modules/`, `.git/`, `dist/`, `build/`, `.next/`, `.nuxt/`, `coverage/`
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**: åˆå›ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆå–å¾—çµæœã‚’å…¨ãƒ©ã‚¦ãƒ³ãƒ‰ã§å†åˆ©ç”¨

```bash
# åˆ¶é™ãƒã‚§ãƒƒã‚¯ä¾‹
TARGET_FILES=$(find "$TARGET" -type f \( -name "*.ts" -o -name "*.tsx" -o -name "*.md" \) \
    ! -path "*/node_modules/*" ! -path "*/.git/*" ! -path "*/dist/*" ! -path "*/build/*")
FILE_COUNT=$(echo "$TARGET_FILES" | wc -l)

if [[ $FILE_COUNT -gt 500 ]]; then
    echo "âš ï¸  è­¦å‘Š: $FILE_COUNT ãƒ•ã‚¡ã‚¤ãƒ«æ¤œå‡ºã€‚500ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚"
    echo "   å¤§è¦æ¨¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ (y/N)"
fi
```

### 2. å¯¾è±¡ã®ç¨®é¡åˆ¤å®š

```bash
# å¼•æ•°è§£æã¨ç¨®åˆ¥æ¤œå‡º
PERSPECTIVES="security,performance,maintainability"  # default
ROUNDS=3  # default
TARGET=""
REVIEW_TYPE=""

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³è§£æ
while [[ $# -gt 0 ]]; do
  case $1 in
    --perspectives=*)
      PERSPECTIVES="${1#*=}"
      shift
      ;;
    --rounds=*)
      ROUNDS="${1#*=}"
      shift
      ;;
    --mr|--pr)
      REVIEW_TYPE="merge_request"
      TARGET="$2"
      shift 2
      ;;
    *)
      TARGET="$1"
      shift
      ;;
  esac
done

# ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥æ¤œå‡º
if [[ "$TARGET" == *".md"* ]]; then
    REVIEW_TYPE="documentation"
elif [[ "$TARGET" == *".ts"* ]] || [[ "$TARGET" == *".tsx"* ]]; then
    REVIEW_TYPE="typescript_code"
elif [[ "$TARGET" == *".py"* ]]; then
    REVIEW_TYPE="python_code"
elif [[ -d "$TARGET" ]]; then
    REVIEW_TYPE="directory"
fi
```

### 3. ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦–ç‚¹ã®å®šç¾©

#### ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦–ç‚¹ï¼ˆRound 1ï¼‰

**é‡ç‚¹ãƒã‚§ãƒƒã‚¯é …ç›®**:
- [ ] **å…¥åŠ›æ¤œè¨¼**: ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®é©åˆ‡ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] **å‡ºåŠ›ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—**: XSS/ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã®å®Ÿè£…çŠ¶æ³
- [ ] **èªè¨¼ãƒ»èªå¯**: æ¨©é™ãƒã‚§ãƒƒã‚¯ã®é©åˆ‡æ€§ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- [ ] **æ©Ÿå¯†æƒ…å ±**: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã€API Keyç­‰
- [ ] **æš—å·åŒ–é€šä¿¡**: HTTPS/TLSä½¿ç”¨ã€æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ä¿è­·
- [ ] **ä¾å­˜é–¢ä¿‚**: æ—¢çŸ¥ã®è„†å¼±æ€§ã‚’æŒã¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½¿ç”¨
- [ ] **OWASPå¯¾å¿œ**: OWASP Top 10ã®å„é …ç›®ã¸ã®å¯¾å¿œçŠ¶æ³

**åˆ†ææ‰‹æ³•**:
```bash
# æ©Ÿå¯†æƒ…å ±æ¤œç´¢
rg -i "password|api_key|secret|token" --type typescript

# å±é™ºãªé–¢æ•°ã®ä½¿ç”¨ç¢ºèª
rg "dangerouslySetInnerHTML|eval\(|Function\(|execSync" --type typescript

# å¤–éƒ¨ä¾å­˜ã®è„†å¼±æ€§ç¢ºèª
npm audit || echo "npm audit not available"
```

#### âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦–ç‚¹ï¼ˆRound 2ï¼‰

**é‡ç‚¹ãƒã‚§ãƒƒã‚¯é …ç›®**:
- [ ] **è¨ˆç®—é‡**: ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ™‚é–“/ç©ºé–“è¨ˆç®—é‡ã®é©åˆ‡æ€§
- [ ] **N+1å•é¡Œ**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªã€APIå‘¼ã³å‡ºã—ã®åŠ¹ç‡æ€§
- [ ] **ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯**: ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã€ã‚¿ã‚¤ãƒãƒ¼ã®é©åˆ‡ãªç ´æ£„
- [ ] **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º**: ä¸è¦ãªä¾å­˜ã€Tree Shakingæœ€é©åŒ–
- [ ] **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: Reactç­‰ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–ï¼ˆuseMemo, useCallbackï¼‰
- [ ] **éåŒæœŸå‡¦ç†**: Promise, async/await ã®é©åˆ‡ãªä½¿ç”¨
- [ ] **ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°**: é©åˆ‡ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®å®Ÿè£…

**åˆ†ææ‰‹æ³•**:
```bash
# å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®ç‰¹å®š
find . -type f \( -name "*.ts" -o -name "*.tsx" \) -exec wc -l {} + | sort -rn | head -10

# ãƒ«ãƒ¼ãƒ—å†…ã®APIå‘¼ã³å‡ºã—æ¤œå‡º
rg "for.*await|while.*await|\.map\(async" --type typescript

# useEffectä¾å­˜é…åˆ—ã®ç¢ºèª
rg "useEffect\(" -A 5 --type typescript | grep -E "^\s*\[.*\]"
```

#### ğŸ› ï¸ ä¿å®ˆæ€§ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¦–ç‚¹ï¼ˆRound 3ï¼‰

**é‡ç‚¹ãƒã‚§ãƒƒã‚¯é …ç›®**:
- [ ] **å˜ä¸€è²¬ä»»ã®åŸå‰‡**: å„é–¢æ•°ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è²¬å‹™ã®æ˜ç¢ºæ€§
- [ ] **DRYåŸå‰‡**: ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã€æŠ½è±¡åŒ–ã®é©åˆ‡æ€§
- [ ] **å‘½åè¦å‰‡**: ä¸€è²«æ€§ã€è‡ªå·±æ–‡æ›¸åŒ–ã•ã‚ŒãŸå‘½å
- [ ] **å‹å®‰å…¨æ€§**: TypeScript strict modeã€å‹æ¨è«–ã®æ´»ç”¨
- [ ] **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: å˜ä½“ãƒ†ã‚¹ãƒˆã®å®¹æ˜“æ€§ã€ä¾å­˜æ€§æ³¨å…¥
- [ ] **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: ã‚³ãƒ¡ãƒ³ãƒˆã€JSDocã€README ã®é©åˆ‡æ€§
- [ ] **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ä¾‹å¤–å‡¦ç†ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é©åˆ‡æ€§
- [ ] **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: å°†æ¥ã®æ‹¡å¼µã¸ã®å¯¾å¿œ

**åˆ†ææ‰‹æ³•**:
```bash
# é•·ã™ãã‚‹é–¢æ•°ã®æ¤œå‡ºï¼ˆ50è¡Œä»¥ä¸Šï¼‰
find . -name "*.ts" -o -name "*.tsx" | while read -r file; do
    awk -v fname="$file" '
        /^function|^const.*=.*=>|^export function/ {start=NR}
        /^}/ {if (NR-start > 50) print fname":"start"-"NR" ("NR-start" lines)"}' "$file"
done

# ã‚³ãƒ¼ãƒ‰é‡è¤‡ã®æ¤œå‡º
rg -n "function.*\{" --type typescript | awk -F: '{print $2}' | sort | uniq -c | sort -rn | head -10

# å‹æ³¨é‡ˆãªã—ã®ç¢ºèª
rg ": any|as any" --type typescript
```

### 4. ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

å„ãƒ©ã‚¦ãƒ³ãƒ‰ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œ:

1. **å¯¾è±¡ã®èª­ã¿è¾¼ã¿**
   ```bash
   # ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆï¼ˆå®‰å…¨ãªãƒ‘ã‚¹å‡¦ç†ï¼‰
   if [[ -f "$TARGET_FILE" && "$TARGET_FILE" != /* ]]; then
       # ç›¸å¯¾ãƒ‘ã‚¹ã®å ´åˆã€ç¾åœ¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«åˆ¶é™
       cat "./$TARGET_FILE"
   elif [[ -f "$TARGET_FILE" ]]; then
       cat "$TARGET_FILE"
   fi

   # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å ´åˆï¼ˆæ·±ã•åˆ¶é™ä»˜ãï¼‰
   find "$TARGET_DIR" -maxdepth 5 -type f \( -name "*.ts" -o -name "*.tsx" \) \
       ! -path "*/node_modules/*" ! -path "*/.git/*"

   # MR/PRã®å ´åˆï¼ˆèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ç¢ºèªï¼‰
   if [[ -n "$GITLAB_TOKEN" ]]; then
       glab mr view "$MR_NUMBER"
   elif [[ -n "$GITHUB_TOKEN" ]]; then
       gh pr view "$PR_NUMBER"
   else
       echo "âš ï¸  èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"
   fi
   ```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### å¼•æ•°å‡¦ç†ã®å®‰å…¨æ€§
- [ ] å…¨ã¦ã®å¼•æ•°ã¯å¿…ãšå¼•ç”¨ç¬¦ã§å›²ã‚€: `"$TARGET"`
- [ ] ãƒ‘ã‚¹å…¥åŠ›ã¯ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¤–ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™
- [ ] `--mr`, `--pr`ç­‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³è§£ææ™‚ã¯æ­£è¦è¡¨ç¾ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®è¿½è·¡ã‚’åˆ¶é™: `find`ã«`-P`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä½¿ç”¨

### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã®å®‰å…¨æ€§
- [ ] `find`å®Ÿè¡Œæ™‚ã¯`-maxdepth`ã§æ·±ã•åˆ¶é™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ5éšå±¤ï¼‰
- [ ] `rg`/`grep`ã¯æ—¢çŸ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã«é™å®š
- [ ] Gitæ“ä½œã¯`.git`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç›´æ¥æ“ä½œã‚’é¿ã‘ã‚‹
- [ ] å¤–éƒ¨CLIãƒ„ãƒ¼ãƒ«ï¼ˆ`glab`, `gh`ï¼‰ä½¿ç”¨æ™‚ã¯èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®å­˜åœ¨ç¢ºèª

### æ©Ÿå¯†æƒ…å ±ä¿è­·
- [ ] ãƒ¬ãƒ“ãƒ¥ãƒ¼å‡ºåŠ›ã«æ©Ÿå¯†æƒ…å ±ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€API Keyç­‰ï¼‰ãŒå«ã¾ã‚Œãªã„ã‚ˆã†é™¤å¤–å‡¦ç†
- [ ] ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã€ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã¯é©åˆ‡ã«å‰Šé™¤
- [ ] å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºæ™‚ã¯æœ€å°æ¨©é™ã®åŸå‰‡ã‚’é©ç”¨

2. **è¦–ç‚¹ç‰¹åŒ–åˆ†æ**
   - è©²å½“è¦–ç‚¹ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆç¢ºèª
   - è‡ªå‹•æ¤œå‡ºã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
   - æ‰‹å‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿæ–½

3. **ç™ºè¦‹äº‹é …ã®è¨˜éŒ²**
   - ğŸ”´ Critical: é‡å¤§ãªå•é¡Œ
   - ğŸŸ¡ Important: é‡è¦ãªæ”¹å–„ç‚¹
   - ğŸŸ¢ Minor: è»½å¾®ãªæ”¹å–„ææ¡ˆ

### 5. çµ±åˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

å…¨ãƒ©ã‚¦ãƒ³ãƒ‰å®Œäº†å¾Œã€ä»¥ä¸‹ã®å½¢å¼ã§çµ±åˆãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ:

```markdown
# ğŸ”„ åå¾©ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

## ğŸ“‹ åŸºæœ¬æƒ…å ±
- **å¯¾è±¡**: [ãƒ•ã‚¡ã‚¤ãƒ«å/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª/MRç•ªå·]
- **ç¨®é¡**: [TypeScript/Python/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç­‰]
- **ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥æ™‚**: [YYYY-MM-DD HH:MM]
- **è¦–ç‚¹æ•°**: [3 (ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ä¿å®ˆæ€§)]

---

## ğŸ”’ Round 1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦–ç‚¹

### ç™ºè¦‹äº‹é …
#### ğŸ”´ Critical Issues
[é‡å¤§ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯]

#### ğŸŸ¡ Important Issues
[é‡è¦ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ”¹å–„ç‚¹]

#### ğŸŸ¢ Minor Issues
[è»½å¾®ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ”¹å–„ææ¡ˆ]

### æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
[å…·ä½“çš„ãªä¿®æ­£ææ¡ˆ]

---

## âš¡ Round 2: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦–ç‚¹

### ç™ºè¦‹äº‹é …
#### ğŸ”´ Critical Issues
[é‡å¤§ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ]

#### ğŸŸ¡ Important Issues
[é‡è¦ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ç‚¹]

#### ğŸŸ¢ Minor Issues
[è»½å¾®ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ææ¡ˆ]

### æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
[å…·ä½“çš„ãªæœ€é©åŒ–ææ¡ˆ]

---

## ğŸ› ï¸ Round 3: ä¿å®ˆæ€§ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¦–ç‚¹

### ç™ºè¦‹äº‹é …
#### ğŸ”´ Critical Issues
[é‡å¤§ãªä¿å®ˆæ€§å•é¡Œ]

#### ğŸŸ¡ Important Issues
[é‡è¦ãªä¿å®ˆæ€§æ”¹å–„ç‚¹]

#### ğŸŸ¢ Minor Issues
[è»½å¾®ãªä¿å®ˆæ€§æ”¹å–„ææ¡ˆ]

### æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
[å…·ä½“çš„ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ææ¡ˆ]

---

## ğŸ“Š ç·åˆè©•ä¾¡

### ç™ºè¦‹äº‹é …ã‚µãƒãƒªãƒ¼
- ğŸ”´ Critical: [Xä»¶]
- ğŸŸ¡ Important: [Yä»¶]
- ğŸŸ¢ Minor: [Zä»¶]

### å„ªå…ˆåº¦åˆ¥ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³

#### æœ€å„ªå…ˆï¼ˆå³å¯¾å¿œï¼‰
1. [Critical Issue 1]
2. [Critical Issue 2]

#### é«˜å„ªå…ˆåº¦ï¼ˆ1é€±é–“ä»¥å†…ï¼‰
1. [Important Issue 1]
2. [Important Issue 2]

#### ä¸­å„ªå…ˆåº¦ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
1. [Minor Issue 1]
2. [Minor Issue 2]

### ç·åˆæ‰€è¦‹
[å…¨ä½“çš„ãªè©•ä¾¡ã¨æ”¹å–„ã®æ–¹å‘æ€§]
```

## è¦–ç‚¹ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä»¥å¤–ã®è¦–ç‚¹ã‚‚æŒ‡å®šå¯èƒ½:

### è¿½åŠ è¦–ç‚¹ã®ä¾‹

- **accessibility**: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼ˆWCAGæº–æ‹ ï¼‰
- **i18n**: å›½éš›åŒ–å¯¾å¿œ
- **testing**: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»å“è³ª
- **documentation**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå……å®Ÿåº¦
- **consistency**: ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ãƒ»ä¸€è²«æ€§
- **scalability**: ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### ã‚«ã‚¹ã‚¿ãƒ è¦–ç‚¹ã®ä½¿ç”¨ä¾‹

```bash
# ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ + i18né‡ç‚¹
/iterative-review components/ --perspectives=accessibility,i18n

# 5è¦–ç‚¹ã®åŒ…æ‹¬ãƒ¬ãƒ“ãƒ¥ãƒ¼
/iterative-review src/ --perspectives=security,performance,maintainability,testing,accessibility
```

## å¯¾è±¡åˆ¥ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰¹åŒ–

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ.mdï¼‰

è¿½åŠ ãƒã‚§ãƒƒã‚¯é …ç›®:
- [ ] **æ§‹é€ **: éšå±¤åŒ–ã€ç›®æ¬¡ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ†å‰²
- [ ] **ãƒªãƒ³ã‚¯**: å†…éƒ¨ãƒªãƒ³ã‚¯åˆ‡ã‚Œã€å¤–éƒ¨ãƒªãƒ³ã‚¯æœ‰åŠ¹æ€§
- [ ] **ä¸€è²«æ€§**: ç”¨èªçµ±ä¸€ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµ±ä¸€
- [ ] **ç¶²ç¾…æ€§**: å¿…è¦æƒ…å ±ã®éä¸è¶³
- [ ] **æ›´æ–°æ€§**: å¤ã„æƒ…å ±ã€æ—¥ä»˜ã®å¦¥å½“æ€§

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆCLAUDE.mdç­‰ï¼‰

è¿½åŠ ãƒã‚§ãƒƒã‚¯é …ç›®:
- [ ] **å®Ÿç”¨æ€§**: å®Ÿéš›ã«ä½¿ãˆã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ»æ‰‹é †
- [ ] **ä¿å®ˆæ€§**: è‚¥å¤§åŒ–ã€é‡è¤‡ã€æ•´ç†çŠ¶æ³
- [ ] **å­¦ç¿’æ›²ç·š**: æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç†è§£ã—ã‚„ã™ã•
- [ ] **æ‹¡å¼µæ€§**: æ–°æ©Ÿèƒ½è¿½åŠ ã®å®¹æ˜“æ€§

## æ³¨æ„äº‹é …

- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç‹¬ç«‹æ€§**: å„ãƒ©ã‚¦ãƒ³ãƒ‰ã¯æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã—ã¦å®Ÿè¡Œ
- **æ™‚é–“ç®¡ç†**: å„ãƒ©ã‚¦ãƒ³ãƒ‰ 5-10åˆ†ã‚’ç›®å®‰ã«
- **å…·ä½“æ€§é‡è¦–**: æŠ½è±¡çš„æŒ‡æ‘˜ã§ã¯ãªãã€ãƒ•ã‚¡ã‚¤ãƒ«å:è¡Œç•ªå·ã‚’æ˜è¨˜
- **å»ºè¨­çš„å§¿å‹¢**: å•é¡ŒæŒ‡æ‘˜ã ã‘ã§ãªãã€è§£æ±ºç­–ã‚‚æç¤º

## å®Ÿè£…ä¾‹

### CLAUDE.md ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾‹

```bash
/iterative-review ~/.claude/CLAUDE.md
```

**Round 1 (ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)**:
- æ©Ÿå¯†æƒ…å ±ã®è¨˜è¼‰æœ‰ç„¡
- å¤–éƒ¨ãƒªãƒ³ã‚¯ã®å®‰å…¨æ€§
- å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã®å®‰å…¨æ€§

**Round 2 (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹)**:
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè‚¥å¤§åŒ–
- èª­ã¿è¾¼ã¿æ™‚é–“ã¸ã®å½±éŸ¿
- æ¤œç´¢åŠ¹ç‡

**Round 3 (ä¿å®ˆæ€§)**:
- ã‚»ã‚¯ã‚·ãƒ§ãƒ³é‡è¤‡
- ãƒªãƒ³ã‚¯åˆ‡ã‚Œ
- å¤ã„æƒ…å ±ã®æ›´æ–°
- æ§‹é€ ã®æ•´ç†çŠ¶æ³

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### å¯¾è±¡ä¸å­˜åœ¨æ™‚ã®å‡¦ç†

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå­˜åœ¨ç¢ºèª
if [[ ! -e "$TARGET" ]]; then
    echo "âŒ ã‚¨ãƒ©ãƒ¼: '$TARGET' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"

    # é¡ä¼¼ãƒ•ã‚¡ã‚¤ãƒ«åã®æ¤œç´¢ï¼ˆdid-you-meané¢¨ï¼‰
    SIMILAR_FILES=$(find . -maxdepth 3 -name "*$(basename "$TARGET" | head -c 5)*" 2>/dev/null | head -5)
    if [[ -n "$SIMILAR_FILES" ]]; then
        echo "ğŸ” é¡ä¼¼ãƒ•ã‚¡ã‚¤ãƒ«:"
        echo "$SIMILAR_FILES" | sed 's/^/  - /'
    fi

    # ã‚¿ã‚¤ãƒãƒã‚§ãƒƒã‚¯ï¼ˆå…±é€šãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
    DIRNAME=$(dirname "$TARGET")
    BASENAME=$(basename "$TARGET")

    # æ‹¡å¼µå­ãƒã‚§ãƒƒã‚¯
    case "$BASENAME" in
        *.ts) ALT_EXT="${BASENAME%.ts}.tsx" ;;
        *.tsx) ALT_EXT="${BASENAME%.tsx}.ts" ;;
        *.md) ALT_EXT="${BASENAME%.md}.mdx" ;;
    esac

    if [[ -n "$ALT_EXT" && -f "$DIRNAME/$ALT_EXT" ]]; then
        echo "ğŸ’¡ ã‚‚ã—ã‹ã—ã¦: $DIRNAME/$ALT_EXT"
    fi

    exit 1
fi
```

### è¦–ç‚¹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¸æ­£æ™‚ã®å‡¦ç†

```bash
# ã‚µãƒãƒ¼ãƒˆè¦–ç‚¹ã®å®šç¾©
SUPPORTED_PERSPECTIVES="security,performance,maintainability,accessibility,i18n,testing,documentation,consistency,scalability"

# è¦–ç‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
validate_perspectives() {
    local input_perspectives="$1"
    local invalid_perspectives=""

    IFS=',' read -ra PERSPECTIVE_ARRAY <<< "$input_perspectives"
    for perspective in "${PERSPECTIVE_ARRAY[@]}"; do
        if [[ ",$SUPPORTED_PERSPECTIVES," != *",$perspective,"* ]]; then
            invalid_perspectives="$invalid_perspectives,$perspective"
        fi
    done

    if [[ -n "$invalid_perspectives" ]]; then
        echo "âŒ æœªå¯¾å¿œã®è¦–ç‚¹: ${invalid_perspectives#,}"
        echo "âœ… ã‚µãƒãƒ¼ãƒˆè¦–ç‚¹: $SUPPORTED_PERSPECTIVES"

        # ã‚¹ãƒšãƒ«ä¿®æ­£ææ¡ˆï¼ˆç°¡æ˜“ç‰ˆï¼‰
        for invalid in ${invalid_perspectives//,/ }; do
            case "$invalid" in
                sec*) echo "ğŸ’¡ ã‚‚ã—ã‹ã—ã¦: security" ;;
                perf*|performance*) echo "ğŸ’¡ ã‚‚ã—ã‹ã—ã¦: performance" ;;
                maintain*|maint*) echo "ğŸ’¡ ã‚‚ã—ã‹ã—ã¦: maintainability" ;;
                access*|a11y) echo "ğŸ’¡ ã‚‚ã—ã‹ã—ã¦: accessibility" ;;
                test*) echo "ğŸ’¡ ã‚‚ã—ã‹ã—ã¦: testing" ;;
                doc*) echo "ğŸ’¡ ã‚‚ã—ã‹ã—ã¦: documentation" ;;
            esac
        done

        echo "ğŸ”„ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¦–ç‚¹ã‚’ä½¿ç”¨: security,performance,maintainability"
        PERSPECTIVES="security,performance,maintainability"
    fi
}
```

### å¤§è¦æ¨¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‡¦ç†æ™‚ã®åˆ¶é™

```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
check_directory_size() {
    local target_dir="$1"
    local file_count

    file_count=$(find "$target_dir" -type f \( -name "*.ts" -o -name "*.tsx" -o -name "*.md" \) \
        ! -path "*/node_modules/*" ! -path "*/.git/*" | wc -l)

    if [[ $file_count -gt 500 ]]; then
        echo "âš ï¸  è­¦å‘Š: $file_count ãƒ•ã‚¡ã‚¤ãƒ«æ¤œå‡ºï¼ˆåˆ¶é™: 500ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰"
        echo "   ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„:"
        echo "   1) ä¸Šä½ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã¿ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ-maxdepth 2ï¼‰"
        echo "   2) ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥ã‚’é™å®šï¼ˆ*.ts ã®ã¿ç­‰ï¼‰"
        echo "   3) ãã®ã¾ã¾å®Ÿè¡Œï¼ˆæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ï¼‰"
        echo "   4) ã‚­ãƒ£ãƒ³ã‚»ãƒ«"
        read -p "é¸æŠ (1-4): " choice

        case $choice in
            1) FIND_OPTS="-maxdepth 2" ;;
            2)
                echo "å¯¾è±¡æ‹¡å¼µå­ã‚’é¸æŠ: ts, tsx, md, py, js"
                read -p "æ‹¡å¼µå­ (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š): " exts
                # å®Ÿè£…çœç•¥
                ;;
            3) echo "å¤§è¦æ¨¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é–‹å§‹..." ;;
            4) exit 0 ;;
            *) echo "ç„¡åŠ¹ãªé¸æŠã§ã™"; exit 1 ;;
        esac
    fi
}
```

## è¦–ç‚¹æ‹¡å¼µè¨­è¨ˆ

### è¦–ç‚¹å®šç¾©ã®å¤–éƒ¨åŒ–ï¼ˆå®Ÿè£…äºˆå®šï¼‰

```yaml
# ~/.claude/review-perspectives.yaml
security:
  name: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦–ç‚¹
  description: OWASP Top 10å¯¾å¿œã€æ©Ÿå¯†æƒ…å ±ä¿è­·
  checks:
    - input_validation: å…¥åŠ›æ¤œè¨¼ã®é©åˆ‡æ€§
    - output_escaping: XSS/ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
    - authentication: èªè¨¼ãƒ»èªå¯ã®å®Ÿè£…
    - secrets: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ©Ÿå¯†æƒ…å ±
  scripts:
    - 'rg -i "password|api_key|secret|token" --type typescript'
    - 'rg "dangerouslySetInnerHTML|eval\(" --type typescript'
  weight: critical

performance:
  name: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦–ç‚¹
  description: è¨ˆç®—é‡ã€ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–
  checks:
    - complexity: ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è¨ˆç®—é‡
    - n_plus_one: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»APIåŠ¹ç‡æ€§
    - memory_leaks: ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯æ¤œå‡º
    - bundle_size: ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºæœ€é©åŒ–
  scripts:
    - 'rg "for.*await|while.*await|\.map\(async" --type typescript'
    - 'find . -name "*.ts" -o -name "*.tsx" | xargs wc -l | sort -rn | head -10'
  weight: important

# ã‚«ã‚¹ã‚¿ãƒ è¦–ç‚¹ã®ä¾‹
accessibility:
  name: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¦–ç‚¹
  description: WCAG 2.1æº–æ‹ ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ
  checks:
    - semantic_html: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTMLä½¿ç”¨
    - alt_text: ç”»åƒä»£æ›¿ãƒ†ã‚­ã‚¹ãƒˆ
    - keyboard_navigation: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œå¯¾å¿œ
    - color_contrast: è‰²å½©ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”
  scripts:
    - 'rg "img.*(?!alt=)" --type typescript'
    - 'rg "onClick.*(?!onKeyPress)" --type typescript'
  weight: important
```

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ–¹å¼ã®æ¤œè¨

```bash
# è¦–ç‚¹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¿½åŠ ï¼ˆå°†æ¥è¨ˆç”»ï¼‰
claude-review add-perspective security-advanced ./security-advanced.yaml
claude-review add-perspective custom-style ./my-style-guide.yaml

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰è¦–ç‚¹
# project/.claude/review-perspectives/project-specific.yaml
```
